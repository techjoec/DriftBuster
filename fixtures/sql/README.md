# SQL Snapshot Fixtures

This directory documents the sample schemas that back the SQL snapshot export
workflows. No binary databases are tracked in-tree; the SQLite files used by
tests are created on the fly so anonymisation guarantees remain repeatable.

## Sample schema

The automated tests build a simple `accounts` table with the following columns:

| column  | type    | purpose                     |
|---------|---------|-----------------------------|
| id      | INTEGER | Primary key generated by DB |
| email   | TEXT    | User contact identifier     |
| secret  | TEXT    | Sensitive credential token  |
| balance | REAL    | Example numeric field       |

## Anonymisation recipe

1. Mask the `secret` column with a placeholder (`[MASK]` by default) so tokens
   never leave the source environment.
2. Hash the `email` column using the deterministic SHA-256 routine exposed by
   `driftbuster.sql.snapshots`. Operators can supply a custom salt to widen the
   anonymisation boundary when exporting production data.
3. Leave numeric columns such as `balance` untouched so downstream tooling can
   validate metric drift without rehydrating secrets.

The same approach applies to larger databases. Provide additional
`table.column` pairs to the capture script or offline runner configuration to
mask or hash other fields as required.
