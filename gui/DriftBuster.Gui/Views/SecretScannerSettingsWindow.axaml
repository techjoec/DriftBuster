<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="DriftBuster.Gui.Views.SecretScannerSettingsWindow"
        Width="640"
        Height="460"
        Title="Secret scanner settings"
        WindowStartupLocation="CenterOwner">
  <Border Padding="24">
    <Grid RowDefinitions="Auto,*,Auto">
      <StackPanel Spacing="6">
        <TextBlock Text="Secret scanner" FontSize="18" FontWeight="SemiBold" />
        <TextBlock Text="Configure ignore rules and patterns to suppress known secrets while maintaining redaction." TextWrapping="Wrap" Classes="subtitle" />
      </StackPanel>

      <Grid Grid.Row="1" ColumnDefinitions="*,*" Margin="0,18,0,18">
        <Border Background="{DynamicResource Brush.SurfaceAlt}" CornerRadius="{DynamicResource Radius.Medium}" BorderBrush="{DynamicResource Brush.Border}" BorderThickness="{DynamicResource Thickness.Border}" Padding="16" Margin="0,0,8,0">
          <StackPanel Spacing="8">
            <TextBlock Text="Ignore rules" FontWeight="SemiBold" />
            <TextBlock Text="Skip entire rule families when you trust their output." Classes="subtitle" TextWrapping="Wrap" />
            <ItemsControl ItemsSource="{Binding IgnoreRules}">
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <StackPanel Orientation="Horizontal" Spacing="10">
                    <TextBox Text="{Binding Value, Mode=TwoWay}" Width="260" Watermark="Rule name" />
                    <Button Content="Remove" Classes="outline"
                            Command="{Binding DataContext.RemoveRuleCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                            CommandParameter="{Binding}" />
                  </StackPanel>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Button Content="Add rule" Classes="outline"
                    Command="{Binding AddRuleCommand}"
                    HorizontalAlignment="Left" />
          </StackPanel>
        </Border>

        <Border Grid.Column="1" Background="{DynamicResource Brush.SurfaceAlt}" CornerRadius="{DynamicResource Radius.Medium}" BorderBrush="{DynamicResource Brush.Border}" BorderThickness="{DynamicResource Thickness.Border}" Padding="16" Margin="8,0,0,0">
          <StackPanel Spacing="8">
            <TextBlock Text="Ignore patterns" FontWeight="SemiBold" />
            <TextBlock Text="Provide literal or regular expression snippets to ignore specific matches." Classes="subtitle" TextWrapping="Wrap" />
            <ItemsControl ItemsSource="{Binding IgnorePatterns}">
              <ItemsControl.ItemTemplate>
                <DataTemplate>
                  <StackPanel Orientation="Horizontal" Spacing="10">
                    <TextBox Text="{Binding Value, Mode=TwoWay}" Width="320" Watermark="Regex or literal" />
                    <Button Content="Remove" Classes="outline"
                            Command="{Binding DataContext.RemovePatternCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                            CommandParameter="{Binding}" />
                  </StackPanel>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Button Content="Add pattern" Classes="outline"
                    Command="{Binding AddPatternCommand}"
                    HorizontalAlignment="Left" />
          </StackPanel>
        </Border>
      </Grid>

      <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
        <Button Content="Cancel" Classes="outline" Click="OnCancel" />
        <Button Content="Save" Classes="primary" Click="OnConfirm" IsDefault="True" />
      </StackPanel>
    </Grid>
  </Border>
</Window>
