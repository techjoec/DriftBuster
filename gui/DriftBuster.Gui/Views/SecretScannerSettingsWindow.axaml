<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="DriftBuster.Gui.Views.SecretScannerSettingsWindow"
        Width="560"
        Height="420"
        Title="Secret scanner settings"
        WindowStartupLocation="CenterOwner">
  <Grid RowDefinitions="Auto,*,Auto" Padding="24" RowSpacing="18">
    <StackPanel Spacing="6">
      <TextBlock Text="Secret scanner" FontSize="18" FontWeight="SemiBold" />
      <TextBlock Text="Configure ignore rules and patterns to suppress known secrets while maintaining redaction." TextWrapping="Wrap" Classes="subtitle" />
    </StackPanel>

    <Grid Grid.Row="1" ColumnDefinitions="*,*" ColumnSpacing="16">
      <GroupBox Header="Ignore rules">
        <StackPanel Spacing="8">
          <TextBlock Text="Skip entire rule families when you trust their output." Classes="subtitle" TextWrapping="Wrap" />
          <ItemsControl ItemsSource="{Binding IgnoreRules}">
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <StackPanel Orientation="Horizontal" Spacing="8">
                  <TextBox Text="{Binding Value, Mode=TwoWay}" Width="220" Watermark="Rule name" />
                  <Button Content="Remove"
                          Command="{Binding DataContext.RemoveRuleCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                          CommandParameter="{Binding}" />
                </StackPanel>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
          <Button Content="Add rule"
                  Command="{Binding AddRuleCommand}"
                  HorizontalAlignment="Left" />
        </StackPanel>
      </GroupBox>

      <GroupBox Grid.Column="1" Header="Ignore patterns">
        <StackPanel Spacing="8">
          <TextBlock Text="Provide literal or regular expression snippets to ignore specific matches." Classes="subtitle" TextWrapping="Wrap" />
          <ItemsControl ItemsSource="{Binding IgnorePatterns}">
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <StackPanel Orientation="Horizontal" Spacing="8">
                  <TextBox Text="{Binding Value, Mode=TwoWay}" Width="260" Watermark="Regex or literal" />
                  <Button Content="Remove"
                          Command="{Binding DataContext.RemovePatternCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                          CommandParameter="{Binding}" />
                </StackPanel>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
          <Button Content="Add pattern"
                  Command="{Binding AddPatternCommand}"
                  HorizontalAlignment="Left" />
        </StackPanel>
      </GroupBox>
    </Grid>

    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Spacing="12">
      <Button Content="Cancel" Click="OnCancel" />
      <Button Content="Save" Click="OnConfirm" IsDefault="True" />
    </StackPanel>
  </Grid>
</Window>
